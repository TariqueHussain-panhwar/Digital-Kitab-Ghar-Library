<!DOCTYPE html>
<html lang="sd" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÚŠØ¬ÙŠÙ½Ù„ Ù„Ø§Ø¦Ø¨Ø±ÙŠØ±ÙŠ - Ù¾Ú™Ú¾Ù†Ø¯Ú™Ù† Ù„Ø§Ø¡Ù</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lateef&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Lateef', serif; background-color: #0f172a; color: white; }
        .book-card { background: #1e293b; border: 1px solid #334155; transition: 0.3s; }
        .book-card:hover { border-color: #f97316; transform: scale(1.02); }
        /* Ø§Ú©Ø±Ù† Ø¬ÙŠ Ø³Ø§Ø¦ÙŠØ² Ø¬Ø§ Ù‚Ø§Ø¹Ø¯Ø§ */
.text-small { font-size: 16px !important; }
.text-medium { font-size: 22px !important; }
.text-large { font-size: 30px !important; }

/* Ø³Ù†ÚŒÙŠ ÙÙˆÙ†Ù½Ø³ Ø¬Ø§ Ø¢Ù¾Ø´Ù† */
.font-lateef { font-family: 'Lateef', serif !important; }
.font-noto { font-family: 'Noto Sans Arabic', sans-serif !important; }
        
    </style>
</head>
<body>
    <nav class="p-6 border-b border-gray-700 bg-slate-900 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <h1 class="text-4xl font-bold text-orange-500">Ù…Ù†ÙØ±Ø¯ Ø³Ù†ÚŒÙŠ Ù„Ø§Ø¦Ø¨Ø±ÙŠØ±ÙŠ</h1>
            <input type="text" id="searchInput" onkeyup="searchBooks()" placeholder="ÚªØªØ§Ø¨ ÙŠØ§ Ù„ÙŠÚ©Úª Ú³ÙˆÙ„ÙŠÙˆ..." class="p-3 rounded-lg w-full md:w-96 text-black px-4 outline-none border-2 border-orange-500 text-right">
        </div>
        
    </nav>
<div class="flex flex-wrap justify-center gap-4 my-4 p-4 bg-slate-800 rounded-xl max-w-7xl mx-auto">
    <div class="flex gap-2 items-center">
        <span class="text-sm">Ø§Ú©Ø±:</span>
        <button onclick="changeFontSize('text-small')" class="bg-gray-600 px-3 py-1 rounded text-xs">Ù†Ù†ÚØ§</button>
        <button onclick="changeFontSize('text-medium')" class="bg-gray-700 px-3 py-1 rounded text-sm border border-orange-500">ÙˆÚ†ÙˆÙ„Ø§</button>
        <button onclick="changeFontSize('text-large')" class="bg-gray-600 px-3 py-1 rounded text-sm">ÙˆÚØ§</button>
    </div>
    <div class="flex gap-2 items-center border-r border-gray-600 pr-4">
        <span class="text-sm">ÙÙˆÙ†Ù½:</span>
        <button onclick="changeFontStyle('font-lateef')" class="bg-blue-900 px-3 py-1 rounded text-xs">Lateef</button>
        <button onclick="changeFontStyle('font-noto')" class="bg-green-900 px-3 py-1 rounded text-xs">Noto Sans</button>
    </div>
</div>

    <main class="max-w-7xl mx-auto p-6">
        <h2 class="text-2xl mb-8 border-r-4 border-orange-500 pr-4">ØªØ§Ø²Ø§ Ø´Ø§Ù…Ù„ ÚªÙŠÙ„ ÚªØªØ§Ø¨</h2>
        <div id="booksGrid" class="text-medium font-lateef grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBUqkNMDmZEpdQtk26qk_bpPVpBPmK8OY8",
            authDomain: "digital-kitab-ghar.firebaseapp.com",
            projectId: "digital-kitab-ghar",
            storageBucket: "digital-kitab-ghar.firebasestorage.app",
            messagingSenderId: "806280436680",
            appId: "1:806280436680:web:da2956efd6b3a3333abefd"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        let allBooks = [];

        onSnapshot(collection(db, "books"), (snap) => {
            allBooks = [];
            snap.forEach((doc) => { allBooks.push({ id: doc.id, ...doc.data() }); });
            displayBooks(allBooks);
        });

        function displayBooks(books) {
            const grid = document.getElementById('booksGrid');
            grid.innerHTML = "";
            books.forEach(book => {
                const cover = book.coverUrl || 'https://via.placeholder.com/300x400?text=ÚªØªØ§Ø¨';
                grid.innerHTML += `
                <div class="book-card p-4 rounded-2xl flex gap-5 shadow-2xl">
                    <img src="${cover}" class="w-32 h-48 object-contain rounded-lg bg-black border border-gray-600">
                  
};

                    <div class="flex-1 text-right">
                        <h3 class="text-2xl font-bold text-orange-400 mb-1 leading-tight">${book.title}</h3>
                        <p class="text-gray-300 text-sm mb-2">Ù„ÙŠÚ©Úª: <span class="text-white font-bold">${book.author}</span></p>
                        <div class="text-xs space-y-1 text-gray-400">
                            <p>Ø³Ø§Ù„: ${book.year}</p>
                            <p>ÚªÙŠÙ½ÙŠÚ¯Ø±ÙŠ: ${book.category}</p>
                            <p>Ù»ÙˆÙ„ÙŠ: ${book.lang}</p>
                        </div>
                        <div class="mt-6 flex gap-2">
                            <a href="${book.pdfUrl}" target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex-1 text-center transition">Ù¾Ú™Ú¾Ùˆ ğŸ“–</a>
                            <a href="${book.pdfUrl}" target="_blank" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex-1 text-center transition">ÚŠØ§Ø¦ÙˆÙ† Ù„ÙˆÚŠ ğŸ“¥</a>
                        </div>
                    </div>
                </div>`;
            });
        }

        }; // Ù‡ÙŠ displayBooks Ú©ÙŠ Ø¨Ù†Ø¯ ÚªØ±ÙŠ Ù¿
window.searchBooks = function() {
    const term = document.getElementById('searchInput').value.toLowerCase();
    const filtered = allBooks.filter(b => b.title.toLowerCase().includes(term) || b.author.toLowerCase().includes(term));
    displayBooks(filtered);
};

window.changeFontSize = function(sizeClass) {
    const grid = document.getElementById('booksGrid');
    grid.classList.remove('text-small', 'text-medium', 'text-large');
    grid.classList.add(sizeClass);
};

window.changeFontStyle = function(fontClass) {
    const grid = document.getElementById('booksGrid');
    grid.classList.remove('font-lateef', 'font-noto');
    grid.classList.add(fontClass);
};

window.toggleNightMode = function() {
    document.body.classList.toggle('bg-black');
    document.body.classList.toggle('text-white');
};
</script>
</body>
</html>
