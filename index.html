
<!DOCTYPE html>
<html lang="sd" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูฺูู - ูพุฑูููุดูู ูุงุฆุจุฑูุฑู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lateef&display=swap" rel="stylesheet">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBUqkNMDmZEpdQtk26qk_bpPVpBPmK8OY8",
            authDomain: "digital-kitab-ghar.firebaseapp.com",
            projectId: "digital-kitab-ghar",
            storageBucket: "digital-kitab-ghar.firebasestorage.app",
            messagingSenderId: "806280436680",
            appId: "1:806280436680:web:da2956efd6b3a3333abefd"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.saveBook = async function() {
            const data = {
                title: document.getElementById('title').value,
                author: document.getElementById('author').value,
                category: document.getElementById('category').value,
                year: document.getElementById('year').value || 'ูุงูุนููู',
                lang: document.getElementById('lang').value || 'ุณูฺู',
                coverUrl: document.getElementById('coverUrl').value,
                pdfUrl: document.getElementById('pdfUrl').value,
                time: new Date()
            };

            if(data.title && data.author) {
                try {
                    await addDoc(collection(db, "books"), data);
                    document.getElementById('bookForm').reset();
                    alert("ฺชุชุงุจ ูฺชูู ูุนูููุงุช ุณุงู ูุญููุธ ูฟูู! โ");
                } catch (e) { alert("ุบูุทู: " + e); }
            }
        };

        onSnapshot(collection(db, "books"), (snap) => {
            const list = document.getElementById('bookList');
            list.innerHTML = "";
            snap.forEach((d) => {
                const b = d.data();
                list.innerHTML += `<tr class="border-b">
                    <td class="p-2 font-bold">${b.title}</td>
                    <td class="p-2">${b.author}</td>
                    <td class="p-2 text-red-500"><button onclick="deleteBook('${d.id}')">ฺูููฝ</button></td>
                </tr>`;
            });
        });

        window.deleteBook = async function(id) { if(confirm("ุฎุชู ฺชุฌูุ")) await deleteDoc(doc(db, "books", id)); };
    </script>
    <style>body { font-family: 'Lateef', serif; }</style>
</head>
<body class="bg-gray-200 p-4">
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-lg border-t-8 border-blue-900 text-right">
        <h2 class="text-3xl font-bold mb-6 text-center text-blue-900 border-b pb-2">ฺชุชุงุจ ุฌู ูฺชูู ูุนูููุงุช ุฏุงุฎู ฺชุฑูู</h2>
        <form id="bookForm" onsubmit="event.preventDefault(); saveBook();" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="text" id="title" placeholder="ฺชุชุงุจ ุฌู ูุงูู" class="p-3 border rounded shadow-sm outline-none" required>
            <input type="text" id="author" placeholder="ููฺฉฺช ุฌู ูุงูู" class="p-3 border rounded shadow-sm outline-none" required>
            <select id="category" class="p-3 border rounded shadow-sm font-bold">
                <option>ุชุงุฑูุฎ</option> <option>ููุณูู</option> <option>ฺชฺพุงฺปููู</option> <option>ูุงูู</option> <option>ุณูุฑูุงูุง</option> <option>ุดุงุนุฑู</option> <option>ูปุงุฑุงฺปู ุงุฏุจ</option> <option>ูุทูููุงุช</option>
            </select>
            <input type="text" id="year" placeholder="ฺูพุฌฺป ุฌู ุณุงู (ูุซุงู: 2024)" class="p-3 border rounded shadow-sm">
            <input type="text" id="lang" placeholder="ูปููู (ูุซุงู: ุณูฺู)" class="p-3 border rounded shadow-sm">
            <input type="text" id="coverUrl" placeholder="ูููฝู ุฌู ููฺช (URL)" class="p-3 border rounded shadow-sm text-left">
            <input type="text" id="pdfUrl" placeholder="PDF ููฺช (Google Drive)" class="p-3 border rounded shadow-sm text-left col-span-1 md:col-span-2">
            <button type="submit" class="col-span-1 md:col-span-2 bg-blue-900 text-white py-4 rounded-lg font-bold text-xl hover:bg-blue-800 transition shadow-md">ฺููฝุงุจูุณ พ ุดุงูู ฺชุฑูู ๐พ</button>
        </form>
        <div class="mt-10">
            <h3 class="font-bold border-b mb-2">ุชุงุฒู ุดุงูู ฺชูู:</h3>
            <table class="w-full text-sm"><tbody id="bookList"></tbody></table>
        </div>
    </div>
</body>
</html>
